"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}document.addEventListener("DOMContentLoaded",(function(){document.getElementsByClassName("burger")[0].addEventListener("click",(function(){for(var e=0;e<4;e++)document.getElementsByClassName("header__li")[e].classList.toggle("header__li--close")}))})),document.addEventListener("DOMContentLoaded",(function(){new JustValidate(".form",{colorWrong:"#F31111",rules:{name:{required:!0,minLength:2,maxLength:10},mail:{required:!0,email:!0}},messages:{name:{required:"Как вас зовут?"},mail:{required:"Укажите ваш email"}}})}));var i="function"==typeof Symbol&&"symbol"==e(Symbol.iterator)?function(t){return e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)};!function(){for(var e=["DocumentType","Element","CharacterData"],t=function(){null!=this.parentNode&&this.parentNode.removeChild(this)},i=0;i<e.length;i++){var n=e[i];window[n]&&!window[n].prototype.remove&&(window[n].prototype.remove=t)}}(),function(e){function t(){}function n(e){if("object"!==i(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function r(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void n._immediateFn((function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null!==i){var n;try{n=i(e._value)}catch(e){return void s(t.promise,e)}o(t.promise,n)}else(1===e._state?o:s)(t.promise,e._value)})))}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===(void 0===t?"undefined":i(t))||"function"==typeof t)){var r=t.then;if(t instanceof n)return e._state=3,e._value=t,void a(e);if("function"==typeof r)return void u(function(e,t){return function(){e.apply(t,arguments)}}(r,t),e)}e._state=1,e._value=t,a(e)}catch(t){s(e,t)}}function s(e,t){e._state=2,e._value=t,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&n._immediateFn((function(){e._handled||n._unhandledRejectionFn(e._value)}));for(var t=0,i=e._deferreds.length;t<i;t++)r(e,e._deferreds[t]);e._deferreds=null}function l(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function u(e,t){var i=!1;try{e((function(e){i||(i=!0,o(t,e))}),(function(e){i||(i=!0,s(t,e))}))}catch(e){if(i)return;i=!0,s(t,e)}}var d=setTimeout;n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,i){var n=new this.constructor(t);return r(this,new l(e,i,n)),n},n.all=function(e){var t=Array.prototype.slice.call(e);return new n((function(e,n){function r(s,a){try{if(a&&("object"===(void 0===a?"undefined":i(a))||"function"==typeof a)){var l=a.then;if("function"==typeof l)return void l.call(a,(function(e){r(s,e)}),n)}t[s]=a,0==--o&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var o=t.length,s=0;s<t.length;s++)r(s,t[s])}))},n.resolve=function(e){return e&&"object"===(void 0===e?"undefined":i(e))&&e.constructor===n?e:new n((function(t){t(e)}))},n.reject=function(e){return new n((function(t,i){i(e)}))},n.race=function(e){return new n((function(t,i){for(var n=0,r=e.length;n<r;n++)e[n].then(t,i)}))},n._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){d(e,0)},n._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},n._setImmediateFn=function(e){n._immediateFn=e},n._setUnhandledRejectionFn=function(e){n._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=n:e.Promise||(e.Promise=n)}(window),function(e){e.Promise||(e.Promise=Promise);var n="required",r="email",o="minLength",s="maxLength",a="password",l="phone",u="remote",d="strength",c="function",h=function(e,t){if("string"==typeof e)return e;var i="post"===t.toLowerCase()?"":"?";return Array.isArray(e)?i+e.map((function(e){return e.name+"="+e.value})).join("&"):i+Object.keys(e).map((function(t){return t+"="+e[t]})).join("&")},f=function(e){var t=e.url,i=e.method,n=e.data,r=e.debug,o=e.callback,s=e.error;if(r)o("test");else{var a=!1!==e.async,l=new XMLHttpRequest,u=h(n,"get"),d=null;"post"===i.toLowerCase()&&(d=h(n,"post"),u=""),l.open(i,t+u,a),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.onreadystatechange=function(){4===this.readyState&&(200===this.status?o(this.responseText):s&&s(this.responseText))},l.send(d)}},m=function(e,t){this.options=t||{},this.rules=this.options.rules||{},this.messages=this.options.messages||void 0,this.colorWrong=this.options.colorWrong||"#B81111",this.result={},this.elements=[],this.tooltip=this.options.tooltip||{},this.tooltipFadeOutTime=this.tooltip.fadeOutTime||5e3,this.tooltipFadeOutClass=this.tooltip.fadeOutClass||"just-validate-tooltip-hide",this.tooltipSelectorWrap=document.querySelectorAll(this.tooltip.selectorWrap).length?document.querySelectorAll(this.tooltip.selectorWrap):document.querySelectorAll(".just-validate-tooltip-container"),this.bindHandlerKeyup=this.handlerKeyup.bind(this),this.submitHandler=this.options.submitHandler||void 0,this.invalidFormCallback=this.options.invalidFormCallback||void 0,this.promisesRemote=[],this.isValidationSuccess=!1,this.focusWrongField=this.options.focusWrongField||!1,this.REGEXP={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,zip:/^\d{5}(-\d{4})?$/,phone:/^([0-9]( |-)?)?(\(?[0-9]{3}\)?|[0-9]{3})( |-)?([0-9]{3}( |-)?[0-9]{4}|[a-zA-Z0-9]{7})$/,password:/[^\w\d]*(([0-9]+.*[A-Za-z]+.*)|[A-Za-z]+.*([0-9]+.*))/,strengthPass:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]/},this.DEFAULT_REMOTE_ERROR="Error",this.state={tooltipsTimer:null},this.setForm(document.querySelector(e))};m.prototype={defaultRules:{email:{required:!0,email:!0},name:{required:!0,minLength:3,maxLength:15},text:{required:!0,maxLength:300,minLength:5},password:{required:!0,password:!0,minLength:4,maxLength:8},zip:{required:!0,zip:!0},phone:{phone:!0}},defaultMessages:{required:"The field is required",email:"Please, type a valid email",maxLength:"The field must contain a maximum of :value characters",minLength:"The field must contain a minimum of :value characters",password:"Password is not valid",remote:"Email already exists",strength:"Password must contents at least one uppercase letter, one lowercase letter and one number",function:"Function returned false"},handlerKeyup:function(e){var t=e.target,i={name:t.getAttribute("data-validate-field"),value:t.value};delete this.result[i.name],this.validateItem({name:i.name,value:i.value,group:[],isKeyupChange:!0}),this.renderErrors()},setterEventListener:function(e,t,i,n){switch("keyup"===t&&(i=this.bindHandlerKeyup),n){case"add":e.addEventListener(t,i);break;case"remove":e.removeEventListener(t,i)}},getElementsRealValue:function(){for(var e=this.$form.querySelectorAll("*"),t=void 0,i={},n=0,r=e.length;n<r;++n)if(t=e[n].getAttribute("name")){if("checkbox"===e[n].type){i[t]=e[n].checked;continue}i[t]=e[n].value}return i},validationFailed:function(){this.invalidFormCallback&&this.invalidFormCallback(this.result);var e=document.querySelector(".js-validate-error-field");this.focusWrongField&&e&&e.focus&&e.focus()},validationSuccess:function(){if(0===Object.keys(this.result).length){if(this.isValidationSuccess=!1,this.submitHandler){var e=this.getElementsRealValue();return void this.submitHandler(this.$form,e,f)}this.$form.submit()}},setForm:function(e){var t=this;this.$form=e,this.$form.setAttribute("novalidate","novalidate"),this.$form.addEventListener("submit",(function(e){return e.preventDefault(),t.result=[],t.getElements(),t.promisesRemote.length?void Promise.all(t.promisesRemote).then((function(){t.promisesRemote=[],t.isValidationSuccess?t.validationSuccess():t.validationFailed()})):void(t.isValidationSuccess?t.validationSuccess():t.validationFailed())}))},isEmail:function(e){return this.REGEXP.email.test(e)},isZip:function(e){return this.REGEXP.zip.test(e)},isPhone:function(e){return this.REGEXP.phone.test(e)},isPassword:function(e){return this.REGEXP.password.test(e)},isEmpty:function(e){var t=e;return e.trim&&(t=e.trim()),!t},checkLengthMax:function(e,t){return e.length<=t},checkLengthMin:function(e,t){return e.length>=t},checkStrengthPass:function(e){return this.REGEXP.strengthPass.test(e)},getElements:function(){var e=this,t=this.$form.querySelectorAll("[data-validate-field]");this.elements=[];for(var i=function(i,n){var r=t[i],o=r.getAttribute("data-validate-field"),s=r.value,a=!1,l=[];if("checkbox"===r.type&&(s=r.checked||"",r.addEventListener("change",(function(t){var i=t.target,n={name:i.getAttribute("data-validate-field"),value:i.checked};delete e.result[n.name],e.validateItem({name:n.name,value:n.value,group:[]}),e.renderErrors()}))),"radio"===r.type){var u=e.elements.filter((function(e){if(e.name===o)return e}))[0];u?(u.group.push(r.checked),a=!0):l.push(r.checked),r.addEventListener("change",(function(t){var i=t.target,n={name:i.getAttribute("data-validate-field"),value:i.checked};delete e.result[n.name],e.validateItem({name:n.name,value:n.value,group:[]}),e.renderErrors()}))}e.setterEventListener(r,"keyup",e.handlerKeyup,"add"),a||e.elements.push({name:o,value:s,group:l})},n=0,r=t.length;n<r;++n)i(n);this.validateElements()},validateRequired:function(e){return!this.isEmpty(e)},validateEmail:function(e){return this.isEmail(e)},validatePhone:function(e){return this.isPhone(e)},validateMinLength:function(e,t){return this.checkLengthMin(e,t)},validateMaxLength:function(e,t){return this.checkLengthMax(e,t)},validateStrengthPass:function(e){return this.checkStrengthPass(e)},validatePassword:function(e){return this.isPassword(e)},validateZip:function(e){return this.isZip(e)},validateRemote:function(e){var i=e.value,n=e.name,r=e.url,o=e.successAnswer,s=e.sendParam,a=e.method;return new Promise((function(e){f({url:r,method:a,data:t({},s,i),async:!0,callback:function(t){t.toLowerCase()===o.toLowerCase()&&e("ok"),e({type:"incorrect",name:n})},error:function(){e({type:"error",name:n})}})}))},generateMessage:function(e,t,i){var n=this.messages||this.defaultMessages,r=n[t]&&n[t][e]||this.messages&&"string"==typeof this.messages[t]&&n[t]||this.defaultMessages[e]||this.DEFAULT_REMOTE_ERROR;i&&(r=r.replace(":value",i.toString())),this.result[t]={message:r}},validateElements:function(){var e=this;return this.lockForm(),this.elements.forEach((function(t){e.validateItem({name:t.name,value:t.value,group:t.group})})),this.promisesRemote.length?void Promise.all(this.promisesRemote).then((function(t){t.forEach((function(t){return"ok"===t||("error"===t.type&&alert("Server error occured. Please try later."),e.generateMessage(u,t.name)),void e.renderErrors()}))})):void this.renderErrors()},validateItem:function(e){var t=this,h=e.name,f=e.group,m=e.value,v=e.isKeyupChange,p=this.rules[h]||this.defaultRules[h]||!1;if(p)for(var g in p){var y=p[g];if(g!==n&&g!==c&&""==m)return;switch(g){case c:if("function"!=typeof y)break;if(y(h,m))break;return void this.generateMessage(c,h,y);case n:if(!y)break;if(f.length){var b=!1;if(f.forEach((function(e){t.validateRequired(e)&&(b=!0)})),b)break}else if(this.validateRequired(m))break;return void this.generateMessage(n,h);case r:if(!y)break;if(this.validateEmail(m))break;return void this.generateMessage(r,h);case o:if(!y)break;if(this.validateMinLength(m,y))break;return void this.generateMessage(o,h,y);case s:if(!y)break;if(this.validateMaxLength(m,y))break;return void this.generateMessage(s,h,y);case l:if(!y)break;if(this.validatePhone(m))break;return void this.generateMessage(l,h);case a:if(!y)break;if(this.validatePassword(m))break;return void this.generateMessage(a,h);case d:if(!y||"object"!==(void 0===y?"undefined":i(y)))break;if(y.default&&this.validateStrengthPass(m))break;if(y.custom){var E=void 0;try{E=new RegExp(y.custom)}catch(e){E=this.REGEXP.strengthPass,console.error("Custom regexp for strength rule is not valid. Default regexp was used.")}if(E.test(m))break}return void this.generateMessage(d,h);case"zip":if(!y)break;if(this.validateZip(m))break;return void this.generateMessage("zip",h);case u:if(v)break;if(!y)break;var w=y.url,k=y.successAnswer,L=y.method,S=y.sendParam,_=this.$form.querySelector('input[data-validate-field="'+h+'"]');return this.setterEventListener(_,"keyup",this.handlerKeyup,"remove"),void this.promisesRemote.push(this.validateRemote({name:h,value:m,url:w,method:L,sendParam:S,successAnswer:k}))}}},clearErrors:function(){for(var e=document.querySelectorAll(".js-validate-error-label"),t=0,i=e.length;t<i;++t)e[t].remove();for(var n=0,r=(e=document.querySelectorAll(".js-validate-error-field")).length;n<r;++n)e[n].classList.remove("js-validate-error-field"),e[n].style.border="",e[n].style.color=""},renderErrors:function(){var e=this;if(this.clearErrors(),this.unlockForm(),this.isValidationSuccess=!1,0!==Object.keys(this.result).length){for(var t in this.result){var i=this.result[t].message,n=this.$form.querySelectorAll('[data-validate-field="'+t+'"]'),r=n[n.length-1],o=document.createElement("div");if(o.innerHTML=i,o.className="js-validate-error-label",o.setAttribute("style","color: "+this.colorWrong),r.style.border="1px solid "+this.colorWrong,r.style.color=""+this.colorWrong,r.classList.add("js-validate-error-field"),"checkbox"===r.type||"radio"===r.type){var s=document.querySelector('label[for="'+r.getAttribute("id")+'"]');"label"===r.parentNode.tagName.toLowerCase()?r.parentNode.parentNode.insertBefore(o,null):s?s.parentNode.insertBefore(o,s.nextSibling):r.parentNode.insertBefore(o,r.nextSibling)}else r.parentNode.insertBefore(o,r.nextSibling)}this.tooltipSelectorWrap.length&&(this.state.tooltipsTimer=setTimeout((function(){e.hideTooltips()}),this.tooltipFadeOutTime))}else this.isValidationSuccess=!0},hideTooltips:function(){var e=this;document.querySelectorAll(".js-validate-error-label").forEach((function(t){t.classList.add(e.tooltipFadeOutClass)})),this.state.tooltipsTimer=null},lockForm:function(){for(var e=this.$form.querySelectorAll("input, textarea, button, select"),t=0,i=e.length;t<i;++t)e[t].setAttribute("disabled","disabled"),e[t].style.pointerEvents="none",e[t].style.webitFilter="grayscale(100%)",e[t].style.filter="grayscale(100%)"},unlockForm:function(){for(var e=this.$form.querySelectorAll("input, textarea, button, select"),t=0,i=e.length;t<i;++t)e[t].removeAttribute("disabled"),e[t].style.pointerEvents="",e[t].style.webitFilter="",e[t].style.filter=""}},e.JustValidate=m}(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1cmdlci1tZW51LmpzIiwianVzdC12YWxpZGF0ZS5taW4uanMiLCJqdXN0LXZhbGlkYXRlLmpzIl0sIm5hbWVzIjpbIl90eXBlb2YyIiwib2JqIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIl9kZWZpbmVQcm9wZXJ0eSIsImUiLCJ0IiwiaSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiSnVzdFZhbGlkYXRlIiwiY29sb3JXcm9uZyIsInJ1bGVzIiwibmFtZSIsInJlcXVpcmVkIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwibWFpbCIsImVtYWlsIiwibWVzc2FnZXMiLCJfdHlwZW9mIiwidGhpcyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImxlbmd0aCIsInIiLCJ3aW5kb3ciLCJyZW1vdmUiLCJUeXBlRXJyb3IiLCJfc3RhdGUiLCJfaGFuZGxlZCIsIl92YWx1ZSIsIl9kZWZlcnJlZHMiLCJ1IiwibiIsInB1c2giLCJfaW1tZWRpYXRlRm4iLCJvbkZ1bGZpbGxlZCIsIm9uUmVqZWN0ZWQiLCJzIiwicHJvbWlzZSIsIm8iLCJ0aGVuIiwiYSIsImFwcGx5IiwiYXJndW1lbnRzIiwiX3VuaGFuZGxlZFJlamVjdGlvbkZuIiwibCIsImQiLCJzZXRUaW1lb3V0IiwiYWxsIiwiQXJyYXkiLCJzbGljZSIsImNhbGwiLCJyZXNvbHZlIiwicmVqZWN0IiwicmFjZSIsInNldEltbWVkaWF0ZSIsImNvbnNvbGUiLCJ3YXJuIiwiX3NldEltbWVkaWF0ZUZuIiwiX3NldFVuaGFuZGxlZFJlamVjdGlvbkZuIiwibW9kdWxlIiwiZXhwb3J0cyIsIlByb21pc2UiLCJjIiwidG9Mb3dlckNhc2UiLCJpc0FycmF5IiwibWFwIiwiam9pbiIsImtleXMiLCJoIiwidXJsIiwibWV0aG9kIiwiZGF0YSIsImRlYnVnIiwiY2FsbGJhY2siLCJlcnJvciIsImFzeW5jIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXNwb25zZVRleHQiLCJzZW5kIiwiZiIsIm9wdGlvbnMiLCJyZXN1bHQiLCJlbGVtZW50cyIsInRvb2x0aXAiLCJ0b29sdGlwRmFkZU91dFRpbWUiLCJmYWRlT3V0VGltZSIsInRvb2x0aXBGYWRlT3V0Q2xhc3MiLCJmYWRlT3V0Q2xhc3MiLCJ0b29sdGlwU2VsZWN0b3JXcmFwIiwicXVlcnlTZWxlY3RvckFsbCIsInNlbGVjdG9yV3JhcCIsImJpbmRIYW5kbGVyS2V5dXAiLCJoYW5kbGVyS2V5dXAiLCJiaW5kIiwic3VibWl0SGFuZGxlciIsImludmFsaWRGb3JtQ2FsbGJhY2siLCJwcm9taXNlc1JlbW90ZSIsImlzVmFsaWRhdGlvblN1Y2Nlc3MiLCJmb2N1c1dyb25nRmllbGQiLCJSRUdFWFAiLCJ6aXAiLCJwaG9uZSIsInBhc3N3b3JkIiwic3RyZW5ndGhQYXNzIiwiREVGQVVMVF9SRU1PVEVfRVJST1IiLCJzdGF0ZSIsInRvb2x0aXBzVGltZXIiLCJzZXRGb3JtIiwicXVlcnlTZWxlY3RvciIsImRlZmF1bHRSdWxlcyIsInRleHQiLCJkZWZhdWx0TWVzc2FnZXMiLCJyZW1vdGUiLCJzdHJlbmd0aCIsImZ1bmN0aW9uIiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwidmFsaWRhdGVJdGVtIiwiZ3JvdXAiLCJpc0tleXVwQ2hhbmdlIiwicmVuZGVyRXJyb3JzIiwic2V0dGVyRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRFbGVtZW50c1JlYWxWYWx1ZSIsIiRmb3JtIiwidHlwZSIsImNoZWNrZWQiLCJ2YWxpZGF0aW9uRmFpbGVkIiwiZm9jdXMiLCJ2YWxpZGF0aW9uU3VjY2VzcyIsInN1Ym1pdCIsInNldEF0dHJpYnV0ZSIsInByZXZlbnREZWZhdWx0IiwiZ2V0RWxlbWVudHMiLCJpc0VtYWlsIiwidGVzdCIsImlzWmlwIiwiaXNQaG9uZSIsImlzUGFzc3dvcmQiLCJpc0VtcHR5IiwidHJpbSIsImNoZWNrTGVuZ3RoTWF4IiwiY2hlY2tMZW5ndGhNaW4iLCJjaGVja1N0cmVuZ3RoUGFzcyIsIl9pIiwiZmlsdGVyIiwidmFsaWRhdGVFbGVtZW50cyIsInZhbGlkYXRlUmVxdWlyZWQiLCJ2YWxpZGF0ZUVtYWlsIiwidmFsaWRhdGVQaG9uZSIsInZhbGlkYXRlTWluTGVuZ3RoIiwidmFsaWRhdGVNYXhMZW5ndGgiLCJ2YWxpZGF0ZVN0cmVuZ3RoUGFzcyIsInZhbGlkYXRlUGFzc3dvcmQiLCJ2YWxpZGF0ZVppcCIsInZhbGlkYXRlUmVtb3RlIiwic3VjY2Vzc0Fuc3dlciIsInNlbmRQYXJhbSIsImdlbmVyYXRlTWVzc2FnZSIsInJlcGxhY2UiLCJ0b1N0cmluZyIsIm1lc3NhZ2UiLCJsb2NrRm9ybSIsImZvckVhY2giLCJhbGVydCIsIm0iLCJ2IiwicCIsImciLCJ5IiwiYiIsImN1c3RvbSIsIkUiLCJSZWdFeHAiLCJ3IiwiayIsIl8iLCJQIiwiUiIsIlMiLCJjbGVhckVycm9ycyIsInN0eWxlIiwiYm9yZGVyIiwiY29sb3IiLCJ1bmxvY2tGb3JtIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImNsYXNzTmFtZSIsImFkZCIsInRhZ05hbWUiLCJpbnNlcnRCZWZvcmUiLCJuZXh0U2libGluZyIsImhpZGVUb29sdGlwcyIsInBvaW50ZXJFdmVudHMiLCJ3ZWJpdEZpbHRlciIsInJlbW92ZUF0dHJpYnV0ZSJdLCJtYXBwaW5ncyI6IkFBQUEsYUNFQSxTQUFBQSxFQUFBQyxHQUFBLE9BQUFELEVBQUEsbUJBQUFFLFFBQUEsaUJBQUFBLE9BQUFDLFNBQUEsU0FBQUYsR0FBQSxjQUFBQSxHQUFBLFNBQUFBLEdBQUEsT0FBQUEsR0FBQSxtQkFBQUMsUUFBQUQs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QUFBMkUsb0JBQUF4RSxTQUFBSCxLQUFBNEYsTUFBQUMsY0FBQWpFLFlBQUEsV0FDQXJELEVBQUE0TSxpQkFDQW5MLEtBQUF1RSwwQkFoQkF2RSxLQUFBb0YscUJBQUEsR0FrQkErRixhQUFBLFdBQ0EsSUFBQTVNLEVBQUF5QixLQUNBaEIsU0FBQTRGLGlCQUFBLDRCQUNBMEUsU0FBQSxTQUFBOUssR0FDQUEsRUFBQVcsVUFBQTRMLElBQUF4TSxFQUFBa0csd0JBQ0F6RSxLQUFBNEYsTUFBQUMsY0FBQSxNQUVBd0QsU0FBQSxXQUNBLElBQUEsSUFBQTlLLEVBQUF5QixLQUFBK0csTUFBQW5DLGlCQUFBLG1DQUFBcEcsRUFBQSxFQUFBQyxFQUFBRixFQUFBNEIsT0FBQTNCLEVBQUFDLElBQUFELEVBQ0FELEVBQUFDLEdBQUE4SSxhQUFBLFdBQUEsWUFBQS9JLEVBQUFDLEdBQUFnTSxNQUFBWSxjQUFBLE9BQUE3TSxFQUFBQyxHQUFBZ00sTUFBQWEsWUFBQSxrQkFBQTlNLEVBQUFDLEdBQUFnTSxNQUFBcEMsT0FBQSxtQkFHQXVDLFdBQUEsV0FDQSxJQUFBLElBQUFwTSxFQUFBeUIsS0FBQStHLE1BQUFuQyxpQkFBQSxtQ0FBQXBHLEVBQUEsRUFBQUMsRUFBQUYsRUFBQTRCLE9BQUEzQixFQUFBQyxJQUFBRCxFQUNBRCxFQUFBQyxHQUFBOE0sZ0JBQUEsWUFBQS9NLEVBQUFDLEdBQUFnTSxNQUFBWSxjQUFBLEdBQUE3TSxFQUFBQyxHQUFBZ00sTUFBQWEsWUFBQSxHQUFBOU0sRUFBQUMsR0FBQWdNLE1BQUFwQyxPQUFBLEtBR0E3SixFQUFBYyxhQUFBNkUsRUE1YkEsQ0E2YkE3RCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIGJ1cmdlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2J1cmdlcicpWzBdO1xuICBidXJnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgIHZhciBsaSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2hlYWRlcl9fbGknKVtpXS5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX2xpLS1jbG9zZScpO1xuICAgIH1cbiAgfSk7XG59KTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YyID0gZnVuY3Rpb24gX3R5cGVvZjIob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZjIob2JqKTsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkoZSwgdCwgaSkge1xuICByZXR1cm4gdCBpbiBlID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIHtcbiAgICB2YWx1ZTogaSxcbiAgICBlbnVtZXJhYmxlOiAhMCxcbiAgICBjb25maWd1cmFibGU6ICEwLFxuICAgIHdyaXRhYmxlOiAhMFxuICB9KSA6IGVbdF0gPSBpLCBlO1xufVxuXG52YXIgX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gX3R5cGVvZjIoU3ltYm9sLml0ZXJhdG9yKSA/IGZ1bmN0aW9uIChlKSB7XG4gIHJldHVybiBfdHlwZW9mMihlKTtcbn0gOiBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBlLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgZSAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiBfdHlwZW9mMihlKTtcbn07XG5cbiFmdW5jdGlvbiAoKSB7XG4gIGZvciAodmFyIGUgPSBbXCJEb2N1bWVudFR5cGVcIiwgXCJFbGVtZW50XCIsIFwiQ2hhcmFjdGVyRGF0YVwiXSwgdCA9IGZ1bmN0aW9uIHQoKSB7XG4gICAgbnVsbCAhPSB0aGlzLnBhcmVudE5vZGUgJiYgdGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpO1xuICB9LCBpID0gMDsgaSA8IGUubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgciA9IGVbaV07XG4gICAgd2luZG93W3JdICYmICF3aW5kb3dbcl0ucHJvdG90eXBlLnJlbW92ZSAmJiAod2luZG93W3JdLnByb3RvdHlwZS5yZW1vdmUgPSB0KTtcbiAgfVxufSgpLCBmdW5jdGlvbiAoZSkge1xuICBmdW5jdGlvbiB0KCkge31cblxuICBmdW5jdGlvbiBpKGUsIHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgZS5hcHBseSh0LCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiByKGUpIHtcbiAgICBpZiAoXCJvYmplY3RcIiAhPT0gX3R5cGVvZih0aGlzKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByb21pc2VzIG11c3QgYmUgY29uc3RydWN0ZWQgdmlhIG5ld1wiKTtcbiAgICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwibm90IGEgZnVuY3Rpb25cIik7XG4gICAgdGhpcy5fc3RhdGUgPSAwLCB0aGlzLl9oYW5kbGVkID0gITEsIHRoaXMuX3ZhbHVlID0gdm9pZCAwLCB0aGlzLl9kZWZlcnJlZHMgPSBbXSwgdShlLCB0aGlzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG4oZSwgdCkge1xuICAgIGZvciAoOyAzID09PSBlLl9zdGF0ZTspIHtcbiAgICAgIGUgPSBlLl92YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gMCA9PT0gZS5fc3RhdGUgPyB2b2lkIGUuX2RlZmVycmVkcy5wdXNoKHQpIDogKGUuX2hhbmRsZWQgPSAhMCwgdm9pZCByLl9pbW1lZGlhdGVGbihmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaSA9IDEgPT09IGUuX3N0YXRlID8gdC5vbkZ1bGZpbGxlZCA6IHQub25SZWplY3RlZDtcbiAgICAgIGlmIChudWxsID09PSBpKSByZXR1cm4gdm9pZCAoMSA9PT0gZS5fc3RhdGUgPyBvIDogcykodC5wcm9taXNlLCBlLl92YWx1ZSk7XG4gICAgICB2YXIgcjtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgciA9IGkoZS5fdmFsdWUpO1xuICAgICAgfSBjYXRjaCAobikge1xuICAgICAgICByZXR1cm4gdm9pZCBzKHQucHJvbWlzZSwgbik7XG4gICAgICB9XG5cbiAgICAgIG8odC5wcm9taXNlLCByKTtcbiAgICB9KSk7XG4gIH1cblxuICBmdW5jdGlvbiBvKGUsIHQpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKHQgPT09IGUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLlwiKTtcblxuICAgICAgaWYgKHQgJiYgKFwib2JqZWN0XCIgPT09IChcInVuZGVmaW5lZFwiID09IHR5cGVvZiB0ID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YodCkpIHx8IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdCkpIHtcbiAgICAgICAgdmFyIG4gPSB0LnRoZW47XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgcikgcmV0dXJuIGUuX3N0YXRlID0gMywgZS5fdmFsdWUgPSB0LCB2b2lkIGEoZSk7XG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG4pIHJldHVybiB2b2lkIHUoaShuLCB0KSwgZSk7XG4gICAgICB9XG5cbiAgICAgIGUuX3N0YXRlID0gMSwgZS5fdmFsdWUgPSB0LCBhKGUpO1xuICAgIH0gY2F0Y2ggKG8pIHtcbiAgICAgIHMoZSwgbyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcyhlLCB0KSB7XG4gICAgZS5fc3RhdGUgPSAyLCBlLl92YWx1ZSA9IHQsIGEoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBhKGUpIHtcbiAgICAyID09PSBlLl9zdGF0ZSAmJiAwID09PSBlLl9kZWZlcnJlZHMubGVuZ3RoICYmIHIuX2ltbWVkaWF0ZUZuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGUuX2hhbmRsZWQgfHwgci5fdW5oYW5kbGVkUmVqZWN0aW9uRm4oZS5fdmFsdWUpO1xuICAgIH0pO1xuXG4gICAgZm9yICh2YXIgdCA9IDAsIGkgPSBlLl9kZWZlcnJlZHMubGVuZ3RoOyB0IDwgaTsgdCsrKSB7XG4gICAgICBuKGUsIGUuX2RlZmVycmVkc1t0XSk7XG4gICAgfVxuXG4gICAgZS5fZGVmZXJyZWRzID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGwoZSwgdCwgaSkge1xuICAgIHRoaXMub25GdWxmaWxsZWQgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUgPyBlIDogbnVsbCwgdGhpcy5vblJlamVjdGVkID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiB0ID8gdCA6IG51bGwsIHRoaXMucHJvbWlzZSA9IGk7XG4gIH1cblxuICBmdW5jdGlvbiB1KGUsIHQpIHtcbiAgICB2YXIgaSA9ICExO1xuXG4gICAgdHJ5IHtcbiAgICAgIGUoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaSB8fCAoaSA9ICEwLCBvKHQsIGUpKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGkgfHwgKGkgPSAhMCwgcyh0LCBlKSk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChyKSB7XG4gICAgICBpZiAoaSkgcmV0dXJuO1xuICAgICAgaSA9ICEwLCBzKHQsIHIpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBkID0gc2V0VGltZW91dDtcbiAgci5wcm90b3R5cGVbXCJjYXRjaFwiXSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBlKTtcbiAgfSwgci5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChlLCBpKSB7XG4gICAgdmFyIHIgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0KTtcbiAgICByZXR1cm4gbih0aGlzLCBuZXcgbChlLCBpLCByKSksIHI7XG4gIH0sIHIuYWxsID0gZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUpO1xuICAgIHJldHVybiBuZXcgcihmdW5jdGlvbiAoZSwgaSkge1xuICAgICAgZnVuY3Rpb24gcihvLCBzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHMgJiYgKFwib2JqZWN0XCIgPT09IChcInVuZGVmaW5lZFwiID09IHR5cGVvZiBzID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YocykpIHx8IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgcykpIHtcbiAgICAgICAgICAgIHZhciBhID0gcy50aGVuO1xuICAgICAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgYSkgcmV0dXJuIHZvaWQgYS5jYWxsKHMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgIHIobywgZSk7XG4gICAgICAgICAgICB9LCBpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0W29dID0gcywgMCA9PT0gLS1uICYmIGUodCk7XG4gICAgICAgIH0gY2F0Y2ggKGwpIHtcbiAgICAgICAgICBpKGwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuIGUoW10pO1xuXG4gICAgICBmb3IgKHZhciBuID0gdC5sZW5ndGgsIG8gPSAwOyBvIDwgdC5sZW5ndGg7IG8rKykge1xuICAgICAgICByKG8sIHRbb10pO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCByLnJlc29sdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgIHJldHVybiBlICYmIFwib2JqZWN0XCIgPT09IChcInVuZGVmaW5lZFwiID09IHR5cGVvZiBlID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoZSkpICYmIGUuY29uc3RydWN0b3IgPT09IHIgPyBlIDogbmV3IHIoZnVuY3Rpb24gKHQpIHtcbiAgICAgIHQoZSk7XG4gICAgfSk7XG4gIH0sIHIucmVqZWN0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICByZXR1cm4gbmV3IHIoZnVuY3Rpb24gKHQsIGkpIHtcbiAgICAgIGkoZSk7XG4gICAgfSk7XG4gIH0sIHIucmFjZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIG5ldyByKGZ1bmN0aW9uICh0LCBpKSB7XG4gICAgICBmb3IgKHZhciByID0gMCwgbiA9IGUubGVuZ3RoOyByIDwgbjsgcisrKSB7XG4gICAgICAgIGVbcl0udGhlbih0LCBpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgci5faW1tZWRpYXRlRm4gPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHNldEltbWVkaWF0ZSAmJiBmdW5jdGlvbiAoZSkge1xuICAgIHNldEltbWVkaWF0ZShlKTtcbiAgfSB8fCBmdW5jdGlvbiAoZSkge1xuICAgIGQoZSwgMCk7XG4gIH0sIHIuX3VuaGFuZGxlZFJlamVjdGlvbkZuID0gZnVuY3Rpb24gKGUpIHtcbiAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBjb25zb2xlICYmIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKFwiUG9zc2libGUgVW5oYW5kbGVkIFByb21pc2UgUmVqZWN0aW9uOlwiLCBlKTtcbiAgfSwgci5fc2V0SW1tZWRpYXRlRm4gPSBmdW5jdGlvbiAoZSkge1xuICAgIHIuX2ltbWVkaWF0ZUZuID0gZTtcbiAgfSwgci5fc2V0VW5oYW5kbGVkUmVqZWN0aW9uRm4gPSBmdW5jdGlvbiAoZSkge1xuICAgIHIuX3VuaGFuZGxlZFJlamVjdGlvbkZuID0gZTtcbiAgfSwgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgbW9kdWxlICYmIG1vZHVsZS5leHBvcnRzID8gbW9kdWxlLmV4cG9ydHMgPSByIDogZS5Qcm9taXNlIHx8IChlLlByb21pc2UgPSByKTtcbn0od2luZG93KSwgZnVuY3Rpb24gKGUpIHtcbiAgZS5Qcm9taXNlIHx8IChlLlByb21pc2UgPSBQcm9taXNlKTtcblxuICB2YXIgdCA9IFwicmVxdWlyZWRcIixcbiAgICAgIGkgPSBcImVtYWlsXCIsXG4gICAgICByID0gXCJtaW5MZW5ndGhcIixcbiAgICAgIG4gPSBcIm1heExlbmd0aFwiLFxuICAgICAgbyA9IFwicGFzc3dvcmRcIixcbiAgICAgIHMgPSBcInppcFwiLFxuICAgICAgYSA9IFwicGhvbmVcIixcbiAgICAgIGwgPSBcInJlbW90ZVwiLFxuICAgICAgdSA9IFwic3RyZW5ndGhcIixcbiAgICAgIGQgPSBcImZ1bmN0aW9uXCIsXG4gICAgICBjID0gZnVuY3Rpb24gYyhlLCB0KSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBlO1xuICAgIHZhciBpID0gXCJwb3N0XCIgPT09IHQudG9Mb3dlckNhc2UoKSA/IFwiXCIgOiBcIj9cIjtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShlKSA/IGkgKyBlLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIGUubmFtZSArIFwiPVwiICsgZS52YWx1ZTtcbiAgICB9KS5qb2luKFwiJlwiKSA6IGkgKyBPYmplY3Qua2V5cyhlKS5tYXAoZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiB0ICsgXCI9XCIgKyBlW3RdO1xuICAgIH0pLmpvaW4oXCImXCIpO1xuICB9LFxuICAgICAgaCA9IGZ1bmN0aW9uIGgoZSkge1xuICAgIHZhciB0ID0gZS51cmwsXG4gICAgICAgIGkgPSBlLm1ldGhvZCxcbiAgICAgICAgciA9IGUuZGF0YSxcbiAgICAgICAgbiA9IGUuZGVidWcsXG4gICAgICAgIG8gPSBlLmNhbGxiYWNrLFxuICAgICAgICBzID0gZS5lcnJvcjtcbiAgICBpZiAobikgcmV0dXJuIHZvaWQgbyhcInRlc3RcIik7XG4gICAgdmFyIGEgPSBlLmFzeW5jICE9PSAhMSxcbiAgICAgICAgbCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICB1ID0gYyhyLCBcImdldFwiKSxcbiAgICAgICAgZCA9IG51bGw7XG4gICAgXCJwb3N0XCIgPT09IGkudG9Mb3dlckNhc2UoKSAmJiAoZCA9IGMociwgXCJwb3N0XCIpLCB1ID0gXCJcIiksIGwub3BlbihpLCB0ICsgdSwgYSksIGwuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSwgbC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICA0ID09PSB0aGlzLnJlYWR5U3RhdGUgJiYgKDIwMCA9PT0gdGhpcy5zdGF0dXMgPyBvKHRoaXMucmVzcG9uc2VUZXh0KSA6IHMgJiYgcyh0aGlzLnJlc3BvbnNlVGV4dCkpO1xuICAgIH0sIGwuc2VuZChkKTtcbiAgfSxcbiAgICAgIGYgPSBmdW5jdGlvbiBmKGUsIHQpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSB0IHx8IHt9LCB0aGlzLnJ1bGVzID0gdGhpcy5vcHRpb25zLnJ1bGVzIHx8IHt9LCB0aGlzLm1lc3NhZ2VzID0gdGhpcy5vcHRpb25zLm1lc3NhZ2VzIHx8IHZvaWQgMCwgdGhpcy5jb2xvcldyb25nID0gdGhpcy5vcHRpb25zLmNvbG9yV3JvbmcgfHwgXCIjQjgxMTExXCIsIHRoaXMucmVzdWx0ID0ge30sIHRoaXMuZWxlbWVudHMgPSBbXSwgdGhpcy50b29sdGlwID0gdGhpcy5vcHRpb25zLnRvb2x0aXAgfHwge30sIHRoaXMudG9vbHRpcEZhZGVPdXRUaW1lID0gdGhpcy50b29sdGlwLmZhZGVPdXRUaW1lIHx8IDVlMywgdGhpcy50b29sdGlwRmFkZU91dENsYXNzID0gdGhpcy50b29sdGlwLmZhZGVPdXRDbGFzcyB8fCBcImp1c3QtdmFsaWRhdGUtdG9vbHRpcC1oaWRlXCIsIHRoaXMudG9vbHRpcFNlbGVjdG9yV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy50b29sdGlwLnNlbGVjdG9yV3JhcCkubGVuZ3RoID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLnRvb2x0aXAuc2VsZWN0b3JXcmFwKSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanVzdC12YWxpZGF0ZS10b29sdGlwLWNvbnRhaW5lclwiKSwgdGhpcy5iaW5kSGFuZGxlcktleXVwID0gdGhpcy5oYW5kbGVyS2V5dXAuYmluZCh0aGlzKSwgdGhpcy5zdWJtaXRIYW5kbGVyID0gdGhpcy5vcHRpb25zLnN1Ym1pdEhhbmRsZXIgfHwgdm9pZCAwLCB0aGlzLmludmFsaWRGb3JtQ2FsbGJhY2sgPSB0aGlzLm9wdGlvbnMuaW52YWxpZEZvcm1DYWxsYmFjayB8fCB2b2lkIDAsIHRoaXMucHJvbWlzZXNSZW1vdGUgPSBbXSwgdGhpcy5pc1ZhbGlkYXRpb25TdWNjZXNzID0gITEsIHRoaXMuZm9jdXNXcm9uZ0ZpZWxkID0gdGhpcy5vcHRpb25zLmZvY3VzV3JvbmdGaWVsZCB8fCAhMSwgdGhpcy5SRUdFWFAgPSB7XG4gICAgICBlbWFpbDogL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC8sXG4gICAgICB6aXA6IC9eXFxkezV9KC1cXGR7NH0pPyQvLFxuICAgICAgcGhvbmU6IC9eKFswLTldKCB8LSk/KT8oXFwoP1swLTldezN9XFwpP3xbMC05XXszfSkoIHwtKT8oWzAtOV17M30oIHwtKT9bMC05XXs0fXxbYS16QS1aMC05XXs3fSkkLyxcbiAgICAgIHBhc3N3b3JkOiAvW15cXHdcXGRdKigoWzAtOV0rLipbQS1aYS16XSsuKil8W0EtWmEtel0rLiooWzAtOV0rLiopKS8sXG4gICAgICBzdHJlbmd0aFBhc3M6IC9eKD89LipbYS16XSkoPz0uKltBLVpdKSg/PS4qXFxkKVthLXpBLVpcXGRdL1xuICAgIH0sIHRoaXMuREVGQVVMVF9SRU1PVEVfRVJST1IgPSBcIkVycm9yXCIsIHRoaXMuc3RhdGUgPSB7XG4gICAgICB0b29sdGlwc1RpbWVyOiBudWxsXG4gICAgfSwgdGhpcy5zZXRGb3JtKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZSkpO1xuICB9O1xuXG4gIGYucHJvdG90eXBlID0ge1xuICAgIGRlZmF1bHRSdWxlczoge1xuICAgICAgZW1haWw6IHtcbiAgICAgICAgcmVxdWlyZWQ6ICEwLFxuICAgICAgICBlbWFpbDogITBcbiAgICAgIH0sXG4gICAgICBuYW1lOiB7XG4gICAgICAgIHJlcXVpcmVkOiAhMCxcbiAgICAgICAgbWluTGVuZ3RoOiAzLFxuICAgICAgICBtYXhMZW5ndGg6IDE1XG4gICAgICB9LFxuICAgICAgdGV4dDoge1xuICAgICAgICByZXF1aXJlZDogITAsXG4gICAgICAgIG1heExlbmd0aDogMzAwLFxuICAgICAgICBtaW5MZW5ndGg6IDVcbiAgICAgIH0sXG4gICAgICBwYXNzd29yZDoge1xuICAgICAgICByZXF1aXJlZDogITAsXG4gICAgICAgIHBhc3N3b3JkOiAhMCxcbiAgICAgICAgbWluTGVuZ3RoOiA0LFxuICAgICAgICBtYXhMZW5ndGg6IDhcbiAgICAgIH0sXG4gICAgICB6aXA6IHtcbiAgICAgICAgcmVxdWlyZWQ6ICEwLFxuICAgICAgICB6aXA6ICEwXG4gICAgICB9LFxuICAgICAgcGhvbmU6IHtcbiAgICAgICAgcGhvbmU6ICEwXG4gICAgICB9XG4gICAgfSxcbiAgICBkZWZhdWx0TWVzc2FnZXM6IHtcbiAgICAgIHJlcXVpcmVkOiBcIlRoZSBmaWVsZCBpcyByZXF1aXJlZFwiLFxuICAgICAgZW1haWw6IFwiUGxlYXNlLCB0eXBlIGEgdmFsaWQgZW1haWxcIixcbiAgICAgIG1heExlbmd0aDogXCJUaGUgZmllbGQgbXVzdCBjb250YWluIGEgbWF4aW11bSBvZiA6dmFsdWUgY2hhcmFjdGVyc1wiLFxuICAgICAgbWluTGVuZ3RoOiBcIlRoZSBmaWVsZCBtdXN0IGNvbnRhaW4gYSBtaW5pbXVtIG9mIDp2YWx1ZSBjaGFyYWN0ZXJzXCIsXG4gICAgICBwYXNzd29yZDogXCJQYXNzd29yZCBpcyBub3QgdmFsaWRcIixcbiAgICAgIHJlbW90ZTogXCJFbWFpbCBhbHJlYWR5IGV4aXN0c1wiLFxuICAgICAgc3RyZW5ndGg6IFwiUGFzc3dvcmQgbXVzdCBjb250ZW50cyBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlciwgb25lIGxvd2VyY2FzZSBsZXR0ZXIgYW5kIG9uZSBudW1iZXJcIixcbiAgICAgIFwiZnVuY3Rpb25cIjogXCJGdW5jdGlvbiByZXR1cm5lZCBmYWxzZVwiXG4gICAgfSxcbiAgICBoYW5kbGVyS2V5dXA6IGZ1bmN0aW9uIGhhbmRsZXJLZXl1cChlKSB7XG4gICAgICB2YXIgdCA9IGUudGFyZ2V0LFxuICAgICAgICAgIGkgPSB7XG4gICAgICAgIG5hbWU6IHQuZ2V0QXR0cmlidXRlKFwiZGF0YS12YWxpZGF0ZS1maWVsZFwiKSxcbiAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgIH07XG4gICAgICBkZWxldGUgdGhpcy5yZXN1bHRbaS5uYW1lXSwgdGhpcy52YWxpZGF0ZUl0ZW0oe1xuICAgICAgICBuYW1lOiBpLm5hbWUsXG4gICAgICAgIHZhbHVlOiBpLnZhbHVlLFxuICAgICAgICBncm91cDogW10sXG4gICAgICAgIGlzS2V5dXBDaGFuZ2U6ICEwXG4gICAgICB9KSwgdGhpcy5yZW5kZXJFcnJvcnMoKTtcbiAgICB9LFxuICAgIHNldHRlckV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uIHNldHRlckV2ZW50TGlzdGVuZXIoZSwgdCwgaSwgcikge1xuICAgICAgc3dpdGNoIChcImtleXVwXCIgPT09IHQgJiYgKGkgPSB0aGlzLmJpbmRIYW5kbGVyS2V5dXApLCByKSB7XG4gICAgICAgIGNhc2UgXCJhZGRcIjpcbiAgICAgICAgICBlLmFkZEV2ZW50TGlzdGVuZXIodCwgaSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcInJlbW92ZVwiOlxuICAgICAgICAgIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LCBpKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGdldEVsZW1lbnRzUmVhbFZhbHVlOiBmdW5jdGlvbiBnZXRFbGVtZW50c1JlYWxWYWx1ZSgpIHtcbiAgICAgIGZvciAodmFyIGUgPSB0aGlzLiRmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqXCIpLCB0ID0gdm9pZCAwLCBpID0ge30sIHIgPSAwLCBuID0gZS5sZW5ndGg7IHIgPCBuOyArK3IpIHtcbiAgICAgICAgaWYgKHQgPSBlW3JdLmdldEF0dHJpYnV0ZShcIm5hbWVcIikpIHtcbiAgICAgICAgICBpZiAoXCJjaGVja2JveFwiID09PSBlW3JdLnR5cGUpIHtcbiAgICAgICAgICAgIGlbdF0gPSBlW3JdLmNoZWNrZWQ7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpW3RdID0gZVtyXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaTtcbiAgICB9LFxuICAgIHZhbGlkYXRpb25GYWlsZWQ6IGZ1bmN0aW9uIHZhbGlkYXRpb25GYWlsZWQoKSB7XG4gICAgICB0aGlzLmludmFsaWRGb3JtQ2FsbGJhY2sgJiYgdGhpcy5pbnZhbGlkRm9ybUNhbGxiYWNrKHRoaXMucmVzdWx0KTtcbiAgICAgIHZhciBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy12YWxpZGF0ZS1lcnJvci1maWVsZFwiKTtcbiAgICAgIHRoaXMuZm9jdXNXcm9uZ0ZpZWxkICYmIGUgJiYgZS5mb2N1cyAmJiBlLmZvY3VzKCk7XG4gICAgfSxcbiAgICB2YWxpZGF0aW9uU3VjY2VzczogZnVuY3Rpb24gdmFsaWRhdGlvblN1Y2Nlc3MoKSB7XG4gICAgICBpZiAoMCA9PT0gT2JqZWN0LmtleXModGhpcy5yZXN1bHQpLmxlbmd0aCkge1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkYXRpb25TdWNjZXNzID0gITEsIHRoaXMuc3VibWl0SGFuZGxlcikge1xuICAgICAgICAgIHZhciBlID0gdGhpcy5nZXRFbGVtZW50c1JlYWxWYWx1ZSgpO1xuICAgICAgICAgIHJldHVybiB2b2lkIHRoaXMuc3VibWl0SGFuZGxlcih0aGlzLiRmb3JtLCBlLCBoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuJGZvcm0uc3VibWl0KCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBzZXRGb3JtOiBmdW5jdGlvbiBzZXRGb3JtKGUpIHtcbiAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgIHRoaXMuJGZvcm0gPSBlLCB0aGlzLiRmb3JtLnNldEF0dHJpYnV0ZShcIm5vdmFsaWRhdGVcIiwgXCJub3ZhbGlkYXRlXCIpLCB0aGlzLiRmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKSwgdC5yZXN1bHQgPSBbXSwgdC5nZXRFbGVtZW50cygpLCB0LnByb21pc2VzUmVtb3RlLmxlbmd0aCA/IHZvaWQgUHJvbWlzZS5hbGwodC5wcm9taXNlc1JlbW90ZSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdC5wcm9taXNlc1JlbW90ZSA9IFtdLCB0LmlzVmFsaWRhdGlvblN1Y2Nlc3MgPyB0LnZhbGlkYXRpb25TdWNjZXNzKCkgOiB0LnZhbGlkYXRpb25GYWlsZWQoKTtcbiAgICAgICAgfSkgOiB2b2lkICh0LmlzVmFsaWRhdGlvblN1Y2Nlc3MgPyB0LnZhbGlkYXRpb25TdWNjZXNzKCkgOiB0LnZhbGlkYXRpb25GYWlsZWQoKSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGlzRW1haWw6IGZ1bmN0aW9uIGlzRW1haWwoZSkge1xuICAgICAgcmV0dXJuIHRoaXMuUkVHRVhQLmVtYWlsLnRlc3QoZSk7XG4gICAgfSxcbiAgICBpc1ppcDogZnVuY3Rpb24gaXNaaXAoZSkge1xuICAgICAgcmV0dXJuIHRoaXMuUkVHRVhQLnppcC50ZXN0KGUpO1xuICAgIH0sXG4gICAgaXNQaG9uZTogZnVuY3Rpb24gaXNQaG9uZShlKSB7XG4gICAgICByZXR1cm4gdGhpcy5SRUdFWFAucGhvbmUudGVzdChlKTtcbiAgICB9LFxuICAgIGlzUGFzc3dvcmQ6IGZ1bmN0aW9uIGlzUGFzc3dvcmQoZSkge1xuICAgICAgcmV0dXJuIHRoaXMuUkVHRVhQLnBhc3N3b3JkLnRlc3QoZSk7XG4gICAgfSxcbiAgICBpc0VtcHR5OiBmdW5jdGlvbiBpc0VtcHR5KGUpIHtcbiAgICAgIHZhciB0ID0gZTtcbiAgICAgIHJldHVybiBlLnRyaW0gJiYgKHQgPSBlLnRyaW0oKSksICF0O1xuICAgIH0sXG4gICAgY2hlY2tMZW5ndGhNYXg6IGZ1bmN0aW9uIGNoZWNrTGVuZ3RoTWF4KGUsIHQpIHtcbiAgICAgIHJldHVybiBlLmxlbmd0aCA8PSB0O1xuICAgIH0sXG4gICAgY2hlY2tMZW5ndGhNaW46IGZ1bmN0aW9uIGNoZWNrTGVuZ3RoTWluKGUsIHQpIHtcbiAgICAgIHJldHVybiBlLmxlbmd0aCA+PSB0O1xuICAgIH0sXG4gICAgY2hlY2tTdHJlbmd0aFBhc3M6IGZ1bmN0aW9uIGNoZWNrU3RyZW5ndGhQYXNzKGUpIHtcbiAgICAgIHJldHVybiB0aGlzLlJFR0VYUC5zdHJlbmd0aFBhc3MudGVzdChlKTtcbiAgICB9LFxuICAgIGdldEVsZW1lbnRzOiBmdW5jdGlvbiBnZXRFbGVtZW50cygpIHtcbiAgICAgIHZhciBlID0gdGhpcyxcbiAgICAgICAgICB0ID0gdGhpcy4kZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtdmFsaWRhdGUtZmllbGRdXCIpO1xuICAgICAgdGhpcy5lbGVtZW50cyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gZnVuY3Rpb24gaShfaSwgcikge1xuICAgICAgICB2YXIgbiA9IHRbX2ldLFxuICAgICAgICAgICAgbyA9IG4uZ2V0QXR0cmlidXRlKFwiZGF0YS12YWxpZGF0ZS1maWVsZFwiKSxcbiAgICAgICAgICAgIHMgPSBuLnZhbHVlLFxuICAgICAgICAgICAgYSA9ICExLFxuICAgICAgICAgICAgbCA9IFtdO1xuXG4gICAgICAgIGlmIChcImNoZWNrYm94XCIgPT09IG4udHlwZSAmJiAocyA9IG4uY2hlY2tlZCB8fCBcIlwiLCBuLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICB2YXIgaSA9IHQudGFyZ2V0LFxuICAgICAgICAgICAgICByID0ge1xuICAgICAgICAgICAgbmFtZTogaS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXZhbGlkYXRlLWZpZWxkXCIpLFxuICAgICAgICAgICAgdmFsdWU6IGkuY2hlY2tlZFxuICAgICAgICAgIH07XG4gICAgICAgICAgZGVsZXRlIGUucmVzdWx0W3IubmFtZV0sIGUudmFsaWRhdGVJdGVtKHtcbiAgICAgICAgICAgIG5hbWU6IHIubmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiByLnZhbHVlLFxuICAgICAgICAgICAgZ3JvdXA6IFtdXG4gICAgICAgICAgfSksIGUucmVuZGVyRXJyb3JzKCk7XG4gICAgICAgIH0pKSwgXCJyYWRpb1wiID09PSBuLnR5cGUpIHtcbiAgICAgICAgICB2YXIgdSA9IGUuZWxlbWVudHMuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5uYW1lID09PSBvKSByZXR1cm4gZTtcbiAgICAgICAgICB9KVswXTtcbiAgICAgICAgICB1ID8gKHUuZ3JvdXAucHVzaChuLmNoZWNrZWQpLCBhID0gITApIDogbC5wdXNoKG4uY2hlY2tlZCksIG4uYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGkgPSB0LnRhcmdldCxcbiAgICAgICAgICAgICAgICByID0ge1xuICAgICAgICAgICAgICBuYW1lOiBpLmdldEF0dHJpYnV0ZShcImRhdGEtdmFsaWRhdGUtZmllbGRcIiksXG4gICAgICAgICAgICAgIHZhbHVlOiBpLmNoZWNrZWRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkZWxldGUgZS5yZXN1bHRbci5uYW1lXSwgZS52YWxpZGF0ZUl0ZW0oe1xuICAgICAgICAgICAgICBuYW1lOiByLm5hbWUsXG4gICAgICAgICAgICAgIHZhbHVlOiByLnZhbHVlLFxuICAgICAgICAgICAgICBncm91cDogW11cbiAgICAgICAgICAgIH0pLCBlLnJlbmRlckVycm9ycygpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZS5zZXR0ZXJFdmVudExpc3RlbmVyKG4sIFwia2V5dXBcIiwgZS5oYW5kbGVyS2V5dXAsIFwiYWRkXCIpLCBhIHx8IGUuZWxlbWVudHMucHVzaCh7XG4gICAgICAgICAgbmFtZTogbyxcbiAgICAgICAgICB2YWx1ZTogcyxcbiAgICAgICAgICBncm91cDogbFxuICAgICAgICB9KTtcbiAgICAgIH0sIHIgPSAwLCBuID0gdC5sZW5ndGg7IHIgPCBuOyArK3IpIHtcbiAgICAgICAgaShyLCBuKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy52YWxpZGF0ZUVsZW1lbnRzKCk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZVJlcXVpcmVkOiBmdW5jdGlvbiB2YWxpZGF0ZVJlcXVpcmVkKGUpIHtcbiAgICAgIHJldHVybiAhdGhpcy5pc0VtcHR5KGUpO1xuICAgIH0sXG4gICAgdmFsaWRhdGVFbWFpbDogZnVuY3Rpb24gdmFsaWRhdGVFbWFpbChlKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc0VtYWlsKGUpO1xuICAgIH0sXG4gICAgdmFsaWRhdGVQaG9uZTogZnVuY3Rpb24gdmFsaWRhdGVQaG9uZShlKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1Bob25lKGUpO1xuICAgIH0sXG4gICAgdmFsaWRhdGVNaW5MZW5ndGg6IGZ1bmN0aW9uIHZhbGlkYXRlTWluTGVuZ3RoKGUsIHQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoZWNrTGVuZ3RoTWluKGUsIHQpO1xuICAgIH0sXG4gICAgdmFsaWRhdGVNYXhMZW5ndGg6IGZ1bmN0aW9uIHZhbGlkYXRlTWF4TGVuZ3RoKGUsIHQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoZWNrTGVuZ3RoTWF4KGUsIHQpO1xuICAgIH0sXG4gICAgdmFsaWRhdGVTdHJlbmd0aFBhc3M6IGZ1bmN0aW9uIHZhbGlkYXRlU3RyZW5ndGhQYXNzKGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoZWNrU3RyZW5ndGhQYXNzKGUpO1xuICAgIH0sXG4gICAgdmFsaWRhdGVQYXNzd29yZDogZnVuY3Rpb24gdmFsaWRhdGVQYXNzd29yZChlKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1Bhc3N3b3JkKGUpO1xuICAgIH0sXG4gICAgdmFsaWRhdGVaaXA6IGZ1bmN0aW9uIHZhbGlkYXRlWmlwKGUpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzWmlwKGUpO1xuICAgIH0sXG4gICAgdmFsaWRhdGVSZW1vdGU6IGZ1bmN0aW9uIHZhbGlkYXRlUmVtb3RlKGUpIHtcbiAgICAgIHZhciB0ID0gZS52YWx1ZSxcbiAgICAgICAgICBpID0gZS5uYW1lLFxuICAgICAgICAgIHIgPSBlLnVybCxcbiAgICAgICAgICBuID0gZS5zdWNjZXNzQW5zd2VyLFxuICAgICAgICAgIG8gPSBlLnNlbmRQYXJhbSxcbiAgICAgICAgICBzID0gZS5tZXRob2Q7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaCh7XG4gICAgICAgICAgdXJsOiByLFxuICAgICAgICAgIG1ldGhvZDogcyxcbiAgICAgICAgICBkYXRhOiBfZGVmaW5lUHJvcGVydHkoe30sIG8sIHQpLFxuICAgICAgICAgIGFzeW5jOiAhMCxcbiAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2sodCkge1xuICAgICAgICAgICAgdC50b0xvd2VyQ2FzZSgpID09PSBuLnRvTG93ZXJDYXNlKCkgJiYgZShcIm9rXCIpLCBlKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJpbmNvcnJlY3RcIixcbiAgICAgICAgICAgICAgbmFtZTogaVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoKSB7XG4gICAgICAgICAgICBlKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgICBuYW1lOiBpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZW5lcmF0ZU1lc3NhZ2U6IGZ1bmN0aW9uIGdlbmVyYXRlTWVzc2FnZShlLCB0LCBpKSB7XG4gICAgICB2YXIgciA9IHRoaXMubWVzc2FnZXMgfHwgdGhpcy5kZWZhdWx0TWVzc2FnZXMsXG4gICAgICAgICAgbiA9IHJbdF0gJiYgclt0XVtlXSB8fCB0aGlzLm1lc3NhZ2VzICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHRoaXMubWVzc2FnZXNbdF0gJiYgclt0XSB8fCB0aGlzLmRlZmF1bHRNZXNzYWdlc1tlXSB8fCB0aGlzLkRFRkFVTFRfUkVNT1RFX0VSUk9SO1xuICAgICAgaSAmJiAobiA9IG4ucmVwbGFjZShcIjp2YWx1ZVwiLCBpLnRvU3RyaW5nKCkpKSwgdGhpcy5yZXN1bHRbdF0gPSB7XG4gICAgICAgIG1lc3NhZ2U6IG5cbiAgICAgIH07XG4gICAgfSxcbiAgICB2YWxpZGF0ZUVsZW1lbnRzOiBmdW5jdGlvbiB2YWxpZGF0ZUVsZW1lbnRzKCkge1xuICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgcmV0dXJuIHRoaXMubG9ja0Zvcm0oKSwgdGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIGUudmFsaWRhdGVJdGVtKHtcbiAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgdmFsdWU6IHQudmFsdWUsXG4gICAgICAgICAgZ3JvdXA6IHQuZ3JvdXBcbiAgICAgICAgfSk7XG4gICAgICB9KSwgdGhpcy5wcm9taXNlc1JlbW90ZS5sZW5ndGggPyB2b2lkIFByb21pc2UuYWxsKHRoaXMucHJvbWlzZXNSZW1vdGUpLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgdC5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgcmV0dXJuIFwib2tcIiA9PT0gdCA/IHZvaWQgZS5yZW5kZXJFcnJvcnMoKSA6IChcImVycm9yXCIgPT09IHQudHlwZSAmJiBhbGVydChcIlNlcnZlciBlcnJvciBvY2N1cmVkLiBQbGVhc2UgdHJ5IGxhdGVyLlwiKSwgZS5nZW5lcmF0ZU1lc3NhZ2UobCwgdC5uYW1lKSwgdm9pZCBlLnJlbmRlckVycm9ycygpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KSA6IHZvaWQgdGhpcy5yZW5kZXJFcnJvcnMoKTtcbiAgICB9LFxuICAgIHZhbGlkYXRlSXRlbTogZnVuY3Rpb24gdmFsaWRhdGVJdGVtKGUpIHtcbiAgICAgIHZhciBjID0gdGhpcyxcbiAgICAgICAgICBoID0gZS5uYW1lLFxuICAgICAgICAgIGYgPSBlLmdyb3VwLFxuICAgICAgICAgIG0gPSBlLnZhbHVlLFxuICAgICAgICAgIHYgPSBlLmlzS2V5dXBDaGFuZ2UsXG4gICAgICAgICAgcCA9IHRoaXMucnVsZXNbaF0gfHwgdGhpcy5kZWZhdWx0UnVsZXNbaF0gfHwgITE7XG4gICAgICBpZiAocCkgZm9yICh2YXIgZyBpbiBwKSB7XG4gICAgICAgIHZhciB5ID0gcFtnXTtcbiAgICAgICAgaWYgKGcgIT09IHQgJiYgZyAhPT0gZCAmJiBcIlwiID09IG0pIHJldHVybjtcblxuICAgICAgICBzd2l0Y2ggKGcpIHtcbiAgICAgICAgICBjYXNlIGQ6XG4gICAgICAgICAgICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiB5KSBicmVhaztcbiAgICAgICAgICAgIGlmICh5KGgsIG0pKSBicmVhaztcbiAgICAgICAgICAgIHJldHVybiB2b2lkIHRoaXMuZ2VuZXJhdGVNZXNzYWdlKGQsIGgsIHkpO1xuXG4gICAgICAgICAgY2FzZSB0OlxuICAgICAgICAgICAgaWYgKCF5KSBicmVhaztcblxuICAgICAgICAgICAgaWYgKGYubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHZhciBiID0gITE7XG4gICAgICAgICAgICAgIGlmIChmLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjLnZhbGlkYXRlUmVxdWlyZWQoZSkgJiYgKGIgPSAhMCk7XG4gICAgICAgICAgICAgIH0pLCBiKSBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy52YWxpZGF0ZVJlcXVpcmVkKG0pKSBicmVhaztcblxuICAgICAgICAgICAgcmV0dXJuIHZvaWQgdGhpcy5nZW5lcmF0ZU1lc3NhZ2UodCwgaCk7XG5cbiAgICAgICAgICBjYXNlIGk6XG4gICAgICAgICAgICBpZiAoIXkpIGJyZWFrO1xuICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVFbWFpbChtKSkgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCB0aGlzLmdlbmVyYXRlTWVzc2FnZShpLCBoKTtcblxuICAgICAgICAgIGNhc2UgcjpcbiAgICAgICAgICAgIGlmICgheSkgYnJlYWs7XG4gICAgICAgICAgICBpZiAodGhpcy52YWxpZGF0ZU1pbkxlbmd0aChtLCB5KSkgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCB0aGlzLmdlbmVyYXRlTWVzc2FnZShyLCBoLCB5KTtcblxuICAgICAgICAgIGNhc2UgbjpcbiAgICAgICAgICAgIGlmICgheSkgYnJlYWs7XG4gICAgICAgICAgICBpZiAodGhpcy52YWxpZGF0ZU1heExlbmd0aChtLCB5KSkgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCB0aGlzLmdlbmVyYXRlTWVzc2FnZShuLCBoLCB5KTtcblxuICAgICAgICAgIGNhc2UgYTpcbiAgICAgICAgICAgIGlmICgheSkgYnJlYWs7XG4gICAgICAgICAgICBpZiAodGhpcy52YWxpZGF0ZVBob25lKG0pKSBicmVhaztcbiAgICAgICAgICAgIHJldHVybiB2b2lkIHRoaXMuZ2VuZXJhdGVNZXNzYWdlKGEsIGgpO1xuXG4gICAgICAgICAgY2FzZSBvOlxuICAgICAgICAgICAgaWYgKCF5KSBicmVhaztcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlUGFzc3dvcmQobSkpIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgdGhpcy5nZW5lcmF0ZU1lc3NhZ2UobywgaCk7XG5cbiAgICAgICAgICBjYXNlIHU6XG4gICAgICAgICAgICBpZiAoIXkgfHwgXCJvYmplY3RcIiAhPT0gKFwidW5kZWZpbmVkXCIgPT0gdHlwZW9mIHkgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih5KSkpIGJyZWFrO1xuICAgICAgICAgICAgaWYgKHlbXCJkZWZhdWx0XCJdICYmIHRoaXMudmFsaWRhdGVTdHJlbmd0aFBhc3MobSkpIGJyZWFrO1xuXG4gICAgICAgICAgICBpZiAoeS5jdXN0b20pIHtcbiAgICAgICAgICAgICAgdmFyIEUgPSB2b2lkIDA7XG5cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBFID0gbmV3IFJlZ0V4cCh5LmN1c3RvbSk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKHcpIHtcbiAgICAgICAgICAgICAgICBFID0gdGhpcy5SRUdFWFAuc3RyZW5ndGhQYXNzLCBjb25zb2xlLmVycm9yKFwiQ3VzdG9tIHJlZ2V4cCBmb3Igc3RyZW5ndGggcnVsZSBpcyBub3QgdmFsaWQuIERlZmF1bHQgcmVnZXhwIHdhcyB1c2VkLlwiKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChFLnRlc3QobSkpIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdm9pZCB0aGlzLmdlbmVyYXRlTWVzc2FnZSh1LCBoKTtcblxuICAgICAgICAgIGNhc2UgczpcbiAgICAgICAgICAgIGlmICgheSkgYnJlYWs7XG4gICAgICAgICAgICBpZiAodGhpcy52YWxpZGF0ZVppcChtKSkgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCB0aGlzLmdlbmVyYXRlTWVzc2FnZShzLCBoKTtcblxuICAgICAgICAgIGNhc2UgbDpcbiAgICAgICAgICAgIGlmICh2KSBicmVhaztcbiAgICAgICAgICAgIGlmICgheSkgYnJlYWs7XG4gICAgICAgICAgICB2YXIgayA9IHkudXJsLFxuICAgICAgICAgICAgICAgIF8gPSB5LnN1Y2Nlc3NBbnN3ZXIsXG4gICAgICAgICAgICAgICAgUCA9IHkubWV0aG9kLFxuICAgICAgICAgICAgICAgIFIgPSB5LnNlbmRQYXJhbSxcbiAgICAgICAgICAgICAgICBTID0gdGhpcy4kZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtkYXRhLXZhbGlkYXRlLWZpZWxkPVwiJyArIGggKyAnXCJdJyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXR0ZXJFdmVudExpc3RlbmVyKFMsIFwia2V5dXBcIiwgdGhpcy5oYW5kbGVyS2V5dXAsIFwicmVtb3ZlXCIpLCB2b2lkIHRoaXMucHJvbWlzZXNSZW1vdGUucHVzaCh0aGlzLnZhbGlkYXRlUmVtb3RlKHtcbiAgICAgICAgICAgICAgbmFtZTogaCxcbiAgICAgICAgICAgICAgdmFsdWU6IG0sXG4gICAgICAgICAgICAgIHVybDogayxcbiAgICAgICAgICAgICAgbWV0aG9kOiBQLFxuICAgICAgICAgICAgICBzZW5kUGFyYW06IFIsXG4gICAgICAgICAgICAgIHN1Y2Nlc3NBbnN3ZXI6IF9cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgY2xlYXJFcnJvcnM6IGZ1bmN0aW9uIGNsZWFyRXJyb3JzKCkge1xuICAgICAgZm9yICh2YXIgZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanMtdmFsaWRhdGUtZXJyb3ItbGFiZWxcIiksIHQgPSAwLCBpID0gZS5sZW5ndGg7IHQgPCBpOyArK3QpIHtcbiAgICAgICAgZVt0XS5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanMtdmFsaWRhdGUtZXJyb3ItZmllbGRcIik7XG5cbiAgICAgIGZvciAodmFyIHIgPSAwLCBuID0gZS5sZW5ndGg7IHIgPCBuOyArK3IpIHtcbiAgICAgICAgZVtyXS5jbGFzc0xpc3QucmVtb3ZlKFwianMtdmFsaWRhdGUtZXJyb3ItZmllbGRcIiksIGVbcl0uc3R5bGUuYm9yZGVyID0gXCJcIiwgZVtyXS5zdHlsZS5jb2xvciA9IFwiXCI7XG4gICAgICB9XG4gICAgfSxcbiAgICByZW5kZXJFcnJvcnM6IGZ1bmN0aW9uIHJlbmRlckVycm9ycygpIHtcbiAgICAgIHZhciBlID0gdGhpcztcbiAgICAgIGlmICh0aGlzLmNsZWFyRXJyb3JzKCksIHRoaXMudW5sb2NrRm9ybSgpLCB0aGlzLmlzVmFsaWRhdGlvblN1Y2Nlc3MgPSAhMSwgMCA9PT0gT2JqZWN0LmtleXModGhpcy5yZXN1bHQpLmxlbmd0aCkgcmV0dXJuIHZvaWQgKHRoaXMuaXNWYWxpZGF0aW9uU3VjY2VzcyA9ICEwKTtcblxuICAgICAgZm9yICh2YXIgdCBpbiB0aGlzLnJlc3VsdCkge1xuICAgICAgICB2YXIgaSA9IHRoaXMucmVzdWx0W3RdLm1lc3NhZ2UsXG4gICAgICAgICAgICByID0gdGhpcy4kZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS12YWxpZGF0ZS1maWVsZD1cIicgKyB0ICsgJ1wiXScpLFxuICAgICAgICAgICAgbiA9IHJbci5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgICAgIGlmIChvLmlubmVySFRNTCA9IGksIG8uY2xhc3NOYW1lID0gXCJqcy12YWxpZGF0ZS1lcnJvci1sYWJlbFwiLCBvLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiY29sb3I6IFwiICsgdGhpcy5jb2xvcldyb25nKSwgbi5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCBcIiArIHRoaXMuY29sb3JXcm9uZywgbi5zdHlsZS5jb2xvciA9IFwiXCIgKyB0aGlzLmNvbG9yV3JvbmcsIG4uY2xhc3NMaXN0LmFkZChcImpzLXZhbGlkYXRlLWVycm9yLWZpZWxkXCIpLCBcImNoZWNrYm94XCIgPT09IG4udHlwZSB8fCBcInJhZGlvXCIgPT09IG4udHlwZSkge1xuICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbGFiZWxbZm9yPVwiJyArIG4uZ2V0QXR0cmlidXRlKFwiaWRcIikgKyAnXCJdJyk7XG4gICAgICAgICAgXCJsYWJlbFwiID09PSBuLnBhcmVudE5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpID8gbi5wYXJlbnROb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG8sIG51bGwpIDogcyA/IHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobywgcy5uZXh0U2libGluZykgOiBuLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG8sIG4ubmV4dFNpYmxpbmcpO1xuICAgICAgICB9IGVsc2Ugbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShvLCBuLm5leHRTaWJsaW5nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50b29sdGlwU2VsZWN0b3JXcmFwLmxlbmd0aCAmJiAodGhpcy5zdGF0ZS50b29sdGlwc1RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGUuaGlkZVRvb2x0aXBzKCk7XG4gICAgICB9LCB0aGlzLnRvb2x0aXBGYWRlT3V0VGltZSkpO1xuICAgIH0sXG4gICAgaGlkZVRvb2x0aXBzOiBmdW5jdGlvbiBoaWRlVG9vbHRpcHMoKSB7XG4gICAgICB2YXIgZSA9IHRoaXMsXG4gICAgICAgICAgdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanMtdmFsaWRhdGUtZXJyb3ItbGFiZWxcIik7XG4gICAgICB0LmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgdC5jbGFzc0xpc3QuYWRkKGUudG9vbHRpcEZhZGVPdXRDbGFzcyk7XG4gICAgICB9KSwgdGhpcy5zdGF0ZS50b29sdGlwc1RpbWVyID0gbnVsbDtcbiAgICB9LFxuICAgIGxvY2tGb3JtOiBmdW5jdGlvbiBsb2NrRm9ybSgpIHtcbiAgICAgIGZvciAodmFyIGUgPSB0aGlzLiRmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dCwgdGV4dGFyZWEsIGJ1dHRvbiwgc2VsZWN0XCIpLCB0ID0gMCwgaSA9IGUubGVuZ3RoOyB0IDwgaTsgKyt0KSB7XG4gICAgICAgIGVbdF0uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKSwgZVt0XS5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCIsIGVbdF0uc3R5bGUud2ViaXRGaWx0ZXIgPSBcImdyYXlzY2FsZSgxMDAlKVwiLCBlW3RdLnN0eWxlLmZpbHRlciA9IFwiZ3JheXNjYWxlKDEwMCUpXCI7XG4gICAgICB9XG4gICAgfSxcbiAgICB1bmxvY2tGb3JtOiBmdW5jdGlvbiB1bmxvY2tGb3JtKCkge1xuICAgICAgZm9yICh2YXIgZSA9IHRoaXMuJGZvcm0ucXVlcnlTZWxlY3RvckFsbChcImlucHV0LCB0ZXh0YXJlYSwgYnV0dG9uLCBzZWxlY3RcIiksIHQgPSAwLCBpID0gZS5sZW5ndGg7IHQgPCBpOyArK3QpIHtcbiAgICAgICAgZVt0XS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSwgZVt0XS5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJcIiwgZVt0XS5zdHlsZS53ZWJpdEZpbHRlciA9IFwiXCIsIGVbdF0uc3R5bGUuZmlsdGVyID0gXCJcIjtcbiAgICAgIH1cbiAgICB9XG4gIH0sIGUuSnVzdFZhbGlkYXRlID0gZjtcbn0od2luZG93KTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgbmV3IEp1c3RWYWxpZGF0ZSgnLmZvcm0nLCB7XG4gICAgY29sb3JXcm9uZzogJyNGMzExMTEnLFxuICAgIHJ1bGVzOiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBtaW5MZW5ndGg6IDIsXG4gICAgICAgIG1heExlbmd0aDogMTBcbiAgICAgIH0sXG4gICAgICBtYWlsOiB7XG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICBlbWFpbDogdHJ1ZVxuICAgICAgfVxuICAgIH0sXG4gICAgbWVzc2FnZXM6IHtcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgcmVxdWlyZWQ6ICfQmtCw0Log0LLQsNGBINC30L7QstGD0YI/J1xuICAgICAgfSxcbiAgICAgIG1haWw6IHtcbiAgICAgICAgcmVxdWlyZWQ6ICfQo9C60LDQttC40YLQtSDQstCw0YggZW1haWwnXG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pOyJdfQ==
